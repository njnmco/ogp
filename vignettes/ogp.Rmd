---
title: "OGP 2020 Analysis Draft"
author: "Neal Fultz <neal@njnm.co>"
date: "2/17/2020"
output: html_vignette
vignette: >
  %\VignetteIndexEntry{OGP 2020 Analysis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
library(ogp)

knitr::opts_chunk$set(echo=FALSE)

if(! "Current.Awards" %in% colnames(allocations)) {
  allocations <- cbind(
    allocations,
    Current = Award(allocations$Budget_Size, OGP.2013_forward, allocations$ScorePercent)
  )
}

```

DRAFT
DRAFT
DRAFT
DRAFT
DRAFT
DRAFT
DRAFT
DRAFT

## Executive Summary

TODO


## Guiding Principles

From: https://www.lacountyarts.org/funding/organizational-grant-program/ogp-grantseekers/apply/ogp-grantseekers-calculator-explained

```
> Working with a professional statistician, the following principles were used to guide the formula creation in 2013:
> 
> The solution should eliminate any discontinuous penalties for growth
> The solution should continue to allow smaller organizations to request and receive a greater proportion of their overall budget than the larger organizations
> The solution should minimize the number of contracts whose maximum grant allocation shifts up or down by more than 25% of the 2013/2014 levels
> The solution should take particular care with the smaller contracts in the OGP I and OGP II categories, for whom small changes in grant allocations create significant difficulties
> The solution could be in the form of a calculator on the Arts and Culture website
> The solution need not take into account the current OGP categories
```

This 2020 update takes the following modifications to the guidelines:

  * Current OGP categories should not change "too much" (TBD)
    * Number of categories
    * Locations of knots
    * Slopes
  * Shifts of < 5% in awards are desireable if possible
    * At individual level
    * At District / City, Discipline, OGP Budget Category / Size, and Project Category / Goal 
    
  Secondary goals:  
  * Reduce the "$0 budget" minimum payout as much as possible
  * Reduce the "$100M" budget maximum payout as much as possible
  * Subject to the above constraints

### Dimensions

Each grantee is categorized in several ways:

  * Location in Los Angeles / District
  * Discipline
  * Project Category
  * OGP Budget Category / Size of Organization


## Location

```{r CityTbl}
ogp_summary_table(allocations, City, "2019 OGP Budget By City")
```

```{r}
ogp_summary_table(allocations, District_Most_Activity, "2019 OGP Budget By District of Most Activity") %>%
  arrange(District_Most_Activity)

```

## Discipline

```{r}
ogp_summary_table(allocations, Discipline, "2019 OGP Budget By Discipline")
```

## Project Objective

__Data not available__

Sustainability
: Provides support for existing artistic and/or administrative projects that help to sustain the mission and goals of arts organizations.
  
Organizational Capacity
: Provides support for new projects that increase the organizational capacity and infrastructure of arts organizations.
  
Artistic Capacity
: Provides support for new projects that increase the artistic capacity of arts organizations.
  
Accessibility
: Provides support for new or existing projects that provide public access to arts activities and programs.


### OGP Category

```{r }
ogp_summary_table(allocations, OGP_Budget_Category, "2019 OGP Budget By OGP Budget Category") %>% 
  arrange(OGP_Budget_Category) %>% 
  rename(`OGP Budget Cat`=OGP_Budget_Category)
```







# Integration with website


The original javascript module is found at 

https://www.lacountyarts.org/sites/all/modules/custom/lacac_calc_button/js/lacac_calc_button.js?pzw4vt

and contains more precision on the slopes than is listed on the OGP website. It is used on the website calculator widget:

https://www.lacountyarts.org/funding/organizational-grant-program/ogp-grantseekers/apply/ogp-grantseekers-calculator-explained

TODO - find contact person who can edit that file.


## Appendix A: R Package Notes

### Installation

  1. Clone the github repo
  2. Place the OGP data files (Requests excel, awards pdf) in `data/`
    a. If format has changed, modify the informat constants in `data/allocations.R`
  3. Install the package using R
